# ===========================================
# GiftBuyer - Пример конфигурации
# ===========================================
# Скопируйте этот файл в .env и настройте под свои нужды

# ===========================================
# ОКРУЖЕНИЕ
# ===========================================

# Режим работы приложения: development (по умолчанию) или production
# В production включаются строгие проверки безопасности
APP_ENV=development

# ===========================================
# БАЗОВЫЕ НАСТРОЙКИ
# ===========================================

# Секретный ключ Flask
# Для разработки можно оставить "dev"
# ⚠️ В PRODUCTION обязательно установите надежный случайный ключ!
# Генерация: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev

# Имя пользователя с правами администратора
# Пользователь должен быть зарегистрирован до запуска приложения
# При старте приложение автоматически выдаст права админа этому пользователю
# Если оставить пустым, админ-панель будет недоступна
ADMIN_USERNAME=

# Ключ шифрования для чувствительных данных в БД
# В dev режиме генерируется автоматически
# ⚠️ В PRODUCTION обязательно установите и сохраните этот ключ!
# Генерация: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ENCRYPTION_KEY=your-encryption-key-here

# База данных
# Development: SQLite для простоты
DATABASE_URL=sqlite:///app.db
# Production: используйте PostgreSQL или MySQL
# DATABASE_URL=postgresql://user:password@localhost:5432/giftbuyer
# DATABASE_URL=mysql+pymysql://user:password@localhost:3306/giftbuyer

# Настройки пула подключений к БД
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=5
DATABASE_POOL_TIMEOUT=30.0

# ===========================================
# НАСТРОЙКИ ПОДАРКОВ И КЭША
# ===========================================

# Каталог с данными подарков
GIFTS_DIR=gifts_data

# Кэш .tgs файлов (Lottie анимации)
GIFTS_CACHE_DIR=backend/instance/gifts_cache

# Период обновления аккаунтов воркером (секунды)
GIFTS_ACCS_TTL=60

# ===========================================
# НАСТРОЙКИ БЕЗОПАСНОСТИ
# ===========================================

# Cookie безопасность
# Development: false (работает без HTTPS)
# Production: установите true (требуется HTTPS!)
COOKIE_SECURE=false
COOKIE_SAMESITE=Strict

# CORS - разрешенные домены (через запятую)
# Development: локальные адреса для Vite dev server
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
# Production: ОБЯЗАТЕЛЬНО укажите конкретные домены!
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# CSRF защита
# Development: отключено для удобства
ENABLE_CSRF=false
# Production: ОБЯЗАТЕЛЬНО включите!
# ENABLE_CSRF=true

# Rate limiting (защита от брутфорса)
ENABLE_RATE_LIMIT=true
RL_LIMIT=10
RL_WINDOW=60

# HSTS (только для HTTPS!)
# Development: отключено (нет HTTPS)
ENABLE_HSTS=false
# Production: включите если используете HTTPS
# ENABLE_HSTS=true

# ===========================================
# НАСТРОЙКИ УСТОЙЧИВОСТИ
# ===========================================

# Таймауты и повторы для внешних запросов
RESILIENCE_TIMEOUT=15.0
RESILIENCE_RETRIES=3
RESILIENCE_BACKOFF_BASE=0.5
RESILIENCE_BACKOFF_CAP=8.0

# Circuit breaker
RESILIENCE_CIRCUIT_THRESHOLD=5
RESILIENCE_CIRCUIT_RESET=60.0

# ===========================================
# НАСТРОЙКИ НАБЛЮДАЕМОСТИ
# ===========================================

# Prometheus метрики
METRICS_ENABLED=true

# Трейсинг (OpenTelemetry)
TRACING_ENABLED=false

# Имя сервиса для метрик
SERVICE_NAME=giftbuyer-backend

# Подробное логирование (для отладки)
# Development: true для детальных логов
# Production: false для минимальных логов
DEBUG_LOGGING=false

# ===========================================
# НАСТРОЙКИ ОЧЕРЕДИ
# ===========================================

# Максимальный размер очереди уведомлений
QUEUE_MAX_SIZE=1000

# Таймаут видимости сообщений в очереди (секунды)
QUEUE_VISIBILITY_TIMEOUT=30.0

# ===========================================
# НАСТРОЙКИ КЭША
# ===========================================

# Время жизни кэша (секунды)
CACHE_TTL=3600

# ===========================================
# ПРИМЕРЫ ДЛЯ РАЗНЫХ СРЕД
# ===========================================

# ===========================================
# ПРИМЕРЫ КОНФИГУРАЦИИ ДЛЯ РАЗНЫХ СРЕД
# ===========================================

# === РАЗРАБОТКА (ТЕКУЩИЕ НАСТРОЙКИ ВЫШЕ) ===
# APP_ENV=development
# SECRET_KEY=dev
# COOKIE_SECURE=false
# COOKIE_SAMESITE=Strict
# ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
# ENABLE_CSRF=false
# ENABLE_HSTS=false
# ENABLE_RATE_LIMIT=true
# DATABASE_URL=sqlite:///app.db

# === ПРОДАКШЕН ===
# ⚠️ ВАЖНО! Скопируйте эти настройки в production .env файл
# APP_ENV=production
# SECRET_KEY=<сгенерируйте сильный ключ!>
# COOKIE_SECURE=true
# COOKIE_SAMESITE=Strict
# ALLOWED_ORIGINS=https://your-frontend.com,https://www.your-frontend.com
# ENABLE_CSRF=true
# ENABLE_HSTS=true
# ENABLE_RATE_LIMIT=true
# RL_LIMIT=10
# RL_WINDOW=60
# DATABASE_URL=postgresql://user:password@localhost:5432/giftbuyer

# === DOCKER ===
# APP_ENV=production
# SECRET_KEY=<сгенерируйте сильный ключ!>
# DATABASE_URL=postgresql://giftbuyer:password@postgres:5432/giftbuyer
# ALLOWED_ORIGINS=https://your-domain.com
# COOKIE_SECURE=true
# ENABLE_CSRF=true
# ENABLE_HSTS=true
