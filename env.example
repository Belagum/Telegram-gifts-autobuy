# ===========================================
# GiftBuyer - Пример конфигурации
# ===========================================
# Скопируйте этот файл в .env и настройте под свои нужды

# ===========================================
# БАЗОВЫЕ НАСТРОЙКИ
# ===========================================

# Секретный ключ Flask (ОБЯЗАТЕЛЬНО в продакшене!)
# Сгенерируйте случайную строку: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-super-secret-key-here-change-me

# База данных
DATABASE_URL=sqlite:///app.db
# Для PostgreSQL: DATABASE_URL=postgresql://user:password@localhost:5432/giftbuyer
# Для MySQL: DATABASE_URL=mysql+pymysql://user:password@localhost:3306/giftbuyer

# Настройки пула подключений к БД
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=5
DATABASE_POOL_TIMEOUT=30.0

# ===========================================
# НАСТРОЙКИ ПОДАРКОВ И КЭША
# ===========================================

# Каталог с данными подарков
GIFTS_DIR=gifts_data

# Кэш .tgs файлов (Lottie анимации)
GIFTS_CACHE_DIR=backend/instance/gifts_cache

# Период обновления аккаунтов воркером (секунды)
GIFTS_ACCS_TTL=60

# ===========================================
# НАСТРОЙКИ БЕЗОПАСНОСТИ
# ===========================================

# Cookie безопасность
# В продакшене (с HTTPS) установите true
COOKIE_SECURE=false
COOKIE_SAMESITE=Strict

# CORS - разрешенные домены (через запятую)
# В продакшене укажите конкретные домены вместо *
ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# CSRF защита
# В продакшене рекомендуется включить
ENABLE_CSRF=false

# Rate limiting (защита от брутфорса)
ENABLE_RATE_LIMIT=true
RL_LIMIT=10
RL_WINDOW=60

# HSTS (только для HTTPS!)
# Включайте только если у вас настроен HTTPS
ENABLE_HSTS=false

# ===========================================
# НАСТРОЙКИ УСТОЙЧИВОСТИ
# ===========================================

# Таймауты и повторы для внешних запросов
RESILIENCE_TIMEOUT=15.0
RESILIENCE_RETRIES=3
RESILIENCE_BACKOFF_BASE=0.5
RESILIENCE_BACKOFF_CAP=8.0

# Circuit breaker
RESILIENCE_CIRCUIT_THRESHOLD=5
RESILIENCE_CIRCUIT_RESET=60.0

# ===========================================
# НАСТРОЙКИ НАБЛЮДАЕМОСТИ
# ===========================================

# Prometheus метрики
METRICS_ENABLED=true

# Трейсинг (OpenTelemetry)
TRACING_ENABLED=false

# Имя сервиса для метрик
SERVICE_NAME=giftbuyer-backend

# ===========================================
# НАСТРОЙКИ ОЧЕРЕДИ
# ===========================================

# Максимальный размер очереди уведомлений
QUEUE_MAX_SIZE=1000

# Таймаут видимости сообщений в очереди (секунды)
QUEUE_VISIBILITY_TIMEOUT=30.0

# ===========================================
# НАСТРОЙКИ КЭША
# ===========================================

# Время жизни кэша (секунды)
CACHE_TTL=3600

# ===========================================
# ПРИМЕРЫ ДЛЯ РАЗНЫХ СРЕД
# ===========================================

# === РАЗРАБОТКА ===
# COOKIE_SECURE=false
# COOKIE_SAMESITE=Lax
# ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
# ENABLE_CSRF=false
# ENABLE_HSTS=false

# === ПРОДАКШЕН ===
# COOKIE_SECURE=true
# COOKIE_SAMESITE=Strict
# ALLOWED_ORIGINS=https://your-frontend.com,https://www.your-frontend.com
# ENABLE_CSRF=true
# ENABLE_HSTS=true
# DATABASE_URL=postgresql://user:password@localhost:5432/giftbuyer

# === DOCKER ===
# DATABASE_URL=postgresql://giftbuyer:password@postgres:5432/giftbuyer
# ALLOWED_ORIGINS=https://your-domain.com
